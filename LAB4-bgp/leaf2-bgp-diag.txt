leaf2# sh ip bgp
BGP routing table information for VRF default, address family IPv4 Unicast
BGP table version is 20, Local Router ID is 172.16.2.2
Status: s-suppressed, x-deleted, S-stale, d-dampened, h-history, *-valid, >-best
Path type: i-internal, e-external, c-confed, l-local, a-aggregate, r-redist, I-i
njected
Origin codes: i - IGP, e - EGP, ? - incomplete, | - multipath, & - backup

   Network            Next Hop            Metric     LocPrf     Weight Path
*>e172.16.1.1/32      10.1.1.5                                       0 65000 i
*>e172.16.1.2/32      10.2.1.5                                       0 65000 i
*|e172.16.2.1/32      10.2.1.5                                       0 65000 65001 i
*>e                   10.1.1.5                                       0 65000 65001 i
*>l172.16.2.2/32      0.0.0.0                           100      32768 i
*|e172.16.2.3/32      10.2.1.5                                       0 65000 65003 i
*>e                   10.1.1.5                                       0 65000 65003 i

leaf2# sh ip route bgp-65002
IP Route Table for VRF "default"
'*' denotes best ucast next-hop
'**' denotes best mcast next-hop
'[x/y]' denotes [preference/metric]
'%<string>' in via output denotes VRF <string>

172.16.1.1/32, ubest/mbest: 1/0
    *via 10.1.1.5, [20/0], 03:42:07, bgp-65002, external, tag 65000
172.16.1.2/32, ubest/mbest: 1/0
    *via 10.2.1.5, [20/0], 03:26:58, bgp-65002, external, tag 65000
172.16.2.1/32, ubest/mbest: 2/0
    *via 10.1.1.5, [20/0], 03:42:07, bgp-65002, external, tag 65000
    *via 10.2.1.5, [20/0], 03:24:24, bgp-65002, external, tag 65000
172.16.2.3/32, ubest/mbest: 2/0
    *via 10.1.1.5, [20/0], 03:34:45, bgp-65002, external, tag 65000
    *via 10.2.1.5, [20/0], 03:26:17, bgp-65002, external, tag 65000

leaf2# ping 172.16.1.1
PING 172.16.1.1 (172.16.1.1): 56 data bytes
64 bytes from 172.16.1.1: icmp_seq=0 ttl=254 time=9.276 ms
64 bytes from 172.16.1.1: icmp_seq=1 ttl=254 time=2.275 ms
64 bytes from 172.16.1.1: icmp_seq=2 ttl=254 time=1.843 ms
64 bytes from 172.16.1.1: icmp_seq=3 ttl=254 time=2.014 ms
64 bytes from 172.16.1.1: icmp_seq=4 ttl=254 time=1.727 ms

--- 172.16.1.1 ping statistics ---
5 packets transmitted, 5 packets received, 0.00% packet loss
round-trip min/avg/max = 1.727/3.426/9.276 ms
leaf2# ping 172.16.1.2
PING 172.16.1.2 (172.16.1.2): 56 data bytes
64 bytes from 172.16.1.2: icmp_seq=0 ttl=254 time=4.133 ms
64 bytes from 172.16.1.2: icmp_seq=1 ttl=254 time=2.814 ms
64 bytes from 172.16.1.2: icmp_seq=2 ttl=254 time=3.132 ms
64 bytes from 172.16.1.2: icmp_seq=3 ttl=254 time=3 ms
64 bytes from 172.16.1.2: icmp_seq=4 ttl=254 time=2.226 ms

--- 172.16.1.2 ping statistics ---
5 packets transmitted, 5 packets received, 0.00% packet loss
round-trip min/avg/max = 2.226/3.061/4.133 ms
leaf2# ping 172.16.2.1 so
source             source-interface
leaf2# ping 172.16.2.1 source-interface lo0
PING 172.16.2.1 (172.16.2.1): 56 data bytes
64 bytes from 172.16.2.1: icmp_seq=0 ttl=253 time=5.622 ms
64 bytes from 172.16.2.1: icmp_seq=1 ttl=253 time=4.092 ms
64 bytes from 172.16.2.1: icmp_seq=2 ttl=253 time=3.921 ms
64 bytes from 172.16.2.1: icmp_seq=3 ttl=253 time=3.662 ms
64 bytes from 172.16.2.1: icmp_seq=4 ttl=253 time=4.483 ms

--- 172.16.2.1 ping statistics ---
5 packets transmitted, 5 packets received, 0.00% packet loss
round-trip min/avg/max = 3.662/4.356/5.622 ms
leaf2# ping 172.16.2.3 source-interface lo0
PING 172.16.2.3 (172.16.2.3): 56 data bytes
64 bytes from 172.16.2.3: icmp_seq=0 ttl=253 time=6.377 ms
64 bytes from 172.16.2.3: icmp_seq=1 ttl=253 time=4.389 ms
64 bytes from 172.16.2.3: icmp_seq=2 ttl=253 time=4.902 ms
64 bytes from 172.16.2.3: icmp_seq=3 ttl=253 time=3.988 ms
64 bytes from 172.16.2.3: icmp_seq=4 ttl=253 time=4.154 ms

--- 172.16.2.3 ping statistics ---
5 packets transmitted, 5 packets received, 0.00% packet loss
round-trip min/avg/max = 3.988/4.761/6.377 ms
leaf2# sh ip bgp nei
BGP neighbor is 10.1.1.5, remote AS 65000, ebgp link, Peer index 3
  Inherits peer configuration from peer-template SPINE
  BGP version 4, remote router ID 172.16.1.1
  BGP state = Established, up for 03:42:41
  Using loopback0 as update source for this peer
  Peer is directly attached, interface Ethernet1/1
  Last read 00:00:02, hold time = 9, keepalive interval is 3 seconds
  Last written 0.165773, keepalive timer expiry due 00:00:02
  Received 4479 messages, 0 notifications, 0 bytes in queue
  Sent 4457 messages, 0 notifications, 0(0) bytes in queue
  Connections established 1, dropped 0
  Last reset by us never, due to No error
  Last reset by peer never, due to No error

  Neighbor capabilities:
  Dynamic capability: advertised (mp, refresh, gr) received (mp, refresh, gr)
  Dynamic capability (old): advertised received
  Route refresh capability (new): advertised received
  Route refresh capability (old): advertised received
  4-Byte AS capability: advertised received
  Address family IPv4 Unicast: advertised received
  Graceful Restart capability: advertised received

  Graceful Restart Parameters:
  Address families advertised to peer:
    IPv4 Unicast
  Address families received from peer:
    IPv4 Unicast
  Forwarding state preserved by peer for:
  Restart time advertised to peer: 120 seconds
  Stale time for routes advertised by peer: 300 seconds
  Restart time advertised by peer: 120 seconds
  Extended Next Hop Encoding Capability: advertised received
  Receive IPv6 next hop encoding Capability for AF:
    IPv4 Unicast

  Message statistics:
                              Sent               Rcvd
  Opens:                         1                  1
  Notifications:                 0                  0
  Updates:                      12                 24
  Keepalives:                 4447               4448
  Route Refresh:                 1                  4
  Capability:                    2                  2
  Total:                      4457               4479
  Total bytes:               85053              85837
  Bytes in queue:                0                  0

  For address family: IPv4 Unicast
  BGP table version 20, neighbor version 20
  3 accepted paths consume 396 bytes of memory
  1 sent paths
  Last End-of-RIB received 03:22:33 after session start
  Last End-of-RIB sent 03:22:38 after session start
  First convergence 00:00:01 after session start with 1 routes sent

  Local host: 10.1.1.6, Local port: 54274
  Foreign host: 10.1.1.5, Foreign port: 179
  fd = 66

BGP neighbor is 10.2.1.5, remote AS 65000, ebgp link, Peer index 4
  Inherits peer configuration from peer-template SPINE
  BGP version 4, remote router ID 172.16.1.2
  BGP state = Established, up for 03:27:32
  Using loopback0 as update source for this peer
  Peer is directly attached, interface Ethernet1/2
  Last read 00:00:01, hold time = 9, keepalive interval is 3 seconds
  Last written 0.166170, keepalive timer expiry due 00:00:02
  Received 4165 messages, 0 notifications, 0 bytes in queue
  Sent 4153 messages, 0 notifications, 0(0) bytes in queue
  Connections established 1, dropped 0
  Last reset by us 03:28:37, due to session closed
  Last reset by peer never, due to No error

  Neighbor capabilities:
  Dynamic capability: advertised (mp, refresh, gr) received (mp, refresh, gr)
  Dynamic capability (old): advertised received
  Route refresh capability (new): advertised received
  Route refresh capability (old): advertised received
  4-Byte AS capability: advertised received
  Address family IPv4 Unicast: advertised received
  Graceful Restart capability: advertised received

  Graceful Restart Parameters:
  Address families advertised to peer:
    IPv4 Unicast
  Address families received from peer:
    IPv4 Unicast
  Forwarding state preserved by peer for:
  Restart time advertised to peer: 120 seconds
  Stale time for routes advertised by peer: 300 seconds
  Restart time advertised by peer: 120 seconds
  Extended Next Hop Encoding Capability: advertised received
  Receive IPv6 next hop encoding Capability for AF:
    IPv4 Unicast

  Message statistics:
                              Sent               Rcvd
  Opens:                         2                  1
  Notifications:                 0                  0
  Updates:                       8                 16
  Keepalives:                 4144               4144
  Route Refresh:                 1                  2
  Capability:                    2                  2
  Total:                      4153               4165
  Total bytes:               79130              79617
  Bytes in queue:                0                  0

  For address family: IPv4 Unicast
  BGP table version 20, neighbor version 20
  3 accepted paths consume 396 bytes of memory
  1 sent paths
  Last End-of-RIB received 03:07:48 after session start
  Last End-of-RIB sent 03:07:53 after session start
  First convergence 00:00:01 after session start with 1 routes sent

  Local host: 10.2.1.6, Local port: 24312
  Foreign host: 10.2.1.5, Foreign port: 179
  fd = 67

leaf1(config)# sh ip bgp
BGP routing table information for VRF default, address family IPv4 Unicast
BGP table version is 20, Local Router ID is 172.16.2.1
Status: s-suppressed, x-deleted, S-stale, d-dampened, h-history, *-valid, >-best
Path type: i-internal, e-external, c-confed, l-local, a-aggregate, r-redist, I-i
njected
Origin codes: i - IGP, e - EGP, ? - incomplete, | - multipath, & - backup

   Network            Next Hop            Metric     LocPrf     Weight Path
*>e172.16.1.1/32      10.1.1.1                                       0 65000 i
*>e172.16.1.2/32      10.2.1.1                                       0 65000 i
*>l172.16.2.1/32      0.0.0.0                           100      32768 i
*|e172.16.2.2/32      10.2.1.1                                       0 65000 65002 i
*>e                   10.1.1.1                                       0 65000 65002 i
*|e172.16.2.3/32      10.2.1.1                                       0 65000 65003 i
*>e                   10.1.1.1                                       0 65000 65003 i

leaf1(config)# sh ip route bgp-65001
IP Route Table for VRF "default"
'*' denotes best ucast next-hop
'**' denotes best mcast next-hop
'[x/y]' denotes [preference/metric]
'%<string>' in via output denotes VRF <string>

172.16.1.1/32, ubest/mbest: 1/0
    *via 10.1.1.1, [20/0], 03:39:14, bgp-65001, external, tag 65000
172.16.1.2/32, ubest/mbest: 1/0
    *via 10.2.1.1, [20/0], 03:16:10, bgp-65001, external, tag 65000
172.16.2.2/32, ubest/mbest: 2/0
    *via 10.1.1.1, [20/0], 03:33:54, bgp-65001, external, tag 65000
    *via 10.2.1.1, [20/0], 03:16:10, bgp-65001, external, tag 65000
172.16.2.3/32, ubest/mbest: 2/0
    *via 10.1.1.1, [20/0], 03:26:32, bgp-65001, external, tag 65000
    *via 10.2.1.1, [20/0], 03:16:10, bgp-65001, external, tag 65000

leaf1(config)# ping 172.16.1.1
PING 172.16.1.1 (172.16.1.1): 56 data bytes
64 bytes from 172.16.1.1: icmp_seq=0 ttl=254 time=4.777 ms
64 bytes from 172.16.1.1: icmp_seq=1 ttl=254 time=2.13 ms
64 bytes from 172.16.1.1: icmp_seq=2 ttl=254 time=3.763 ms
64 bytes from 172.16.1.1: icmp_seq=3 ttl=254 time=2.052 ms
64 bytes from 172.16.1.1: icmp_seq=4 ttl=254 time=1.816 ms

--- 172.16.1.1 ping statistics ---
5 packets transmitted, 5 packets received, 0.00% packet loss
round-trip min/avg/max = 1.816/2.907/4.777 ms
leaf1(config)# ping 172.16.1.2
PING 172.16.1.2 (172.16.1.2): 56 data bytes
64 bytes from 172.16.1.2: icmp_seq=0 ttl=254 time=3.422 ms
64 bytes from 172.16.1.2: icmp_seq=1 ttl=254 time=2.236 ms
64 bytes from 172.16.1.2: icmp_seq=2 ttl=254 time=2.157 ms
64 bytes from 172.16.1.2: icmp_seq=3 ttl=254 time=1.914 ms
64 bytes from 172.16.1.2: icmp_seq=4 ttl=254 time=1.635 ms

--- 172.16.1.2 ping statistics ---
5 packets transmitted, 5 packets received, 0.00% packet loss
round-trip min/avg/max = 1.635/2.272/3.422 ms
leaf1(config)# ping 172.16.2.2 so
source             source-interface
leaf1(config)# ping 172.16.2.2 source-interface lo0
PING 172.16.2.2 (172.16.2.2): 56 data bytes
64 bytes from 172.16.2.2: icmp_seq=0 ttl=253 time=6.783 ms
64 bytes from 172.16.2.2: icmp_seq=1 ttl=253 time=4.497 ms
64 bytes from 172.16.2.2: icmp_seq=2 ttl=253 time=3.639 ms
64 bytes from 172.16.2.2: icmp_seq=3 ttl=253 time=4.299 ms
64 bytes from 172.16.2.2: icmp_seq=4 ttl=253 time=3.813 ms

--- 172.16.2.2 ping statistics ---
5 packets transmitted, 5 packets received, 0.00% packet loss
round-trip min/avg/max = 3.639/4.606/6.783 ms
leaf1(config)# ping 172.16.2.3 source-interface lo0
PING 172.16.2.3 (172.16.2.3): 56 data bytes
64 bytes from 172.16.2.3: icmp_seq=0 ttl=253 time=6.192 ms
64 bytes from 172.16.2.3: icmp_seq=1 ttl=253 time=4.241 ms
64 bytes from 172.16.2.3: icmp_seq=2 ttl=253 time=4.085 ms
64 bytes from 172.16.2.3: icmp_seq=3 ttl=253 time=4.719 ms
64 bytes from 172.16.2.3: icmp_seq=4 ttl=253 time=4.341 ms

--- 172.16.2.3 ping statistics ---
5 packets transmitted, 5 packets received, 0.00% packet loss
round-trip min/avg/max = 4.085/4.715/6.192 ms
leaf1(config)# sh ip bgp nei
BGP neighbor is 10.1.1.1, remote AS 65000, ebgp link, Peer index 3
  Inherits peer configuration from peer-template SPINE
  BGP version 4, remote router ID 172.16.1.1
  BGP state = Established, up for 03:39:55
  Using loopback0 as update source for this peer
  Peer is directly attached, interface Ethernet1/1
  Last read 00:00:02, hold time = 9, keepalive interval is 3 seconds
  Last written 0.970218, keepalive timer expiry due 00:00:02
  Received 4423 messages, 0 notifications, 0 bytes in queue
  Sent 4402 messages, 0 notifications, 0(0) bytes in queue
  Connections established 1, dropped 0
  Last reset by us never, due to No error
  Last reset by peer never, due to No error

  Neighbor capabilities:
  Dynamic capability: advertised (mp, refresh, gr) received (mp, refresh, gr)
  Dynamic capability (old): advertised received
  Route refresh capability (new): advertised received
  Route refresh capability (old): advertised received
  4-Byte AS capability: advertised received
  Address family IPv4 Unicast: advertised received
  Graceful Restart capability: advertised received

  Graceful Restart Parameters:
  Address families advertised to peer:
    IPv4 Unicast
  Address families received from peer:
    IPv4 Unicast
  Forwarding state preserved by peer for:
  Restart time advertised to peer: 120 seconds
  Stale time for routes advertised by peer: 300 seconds
  Restart time advertised by peer: 120 seconds
  Extended Next Hop Encoding Capability: advertised received
  Receive IPv6 next hop encoding Capability for AF:
    IPv4 Unicast

  Message statistics:
                              Sent               Rcvd
  Opens:                         1                  1
  Notifications:                 0                  0
  Updates:                      12                 24
  Keepalives:                 4392               4392
  Route Refresh:                 1                  4
  Capability:                    2                  2
  Total:                      4402               4423
  Total bytes:               84008              84773
  Bytes in queue:                0                  0

  For address family: IPv4 Unicast
  BGP table version 20, neighbor version 20
  3 accepted paths consume 396 bytes of memory
  1 sent paths
  Last End-of-RIB received 03:27:53 after session start
  Last End-of-RIB sent 03:27:58 after session start
  First convergence 00:00:01 after session start with 1 routes sent

  Local host: 10.1.1.2, Local port: 28670
  Foreign host: 10.1.1.1, Foreign port: 179
  fd = 66

BGP neighbor is 10.2.1.1, remote AS 65000, ebgp link, Peer index 4
  Inherits peer configuration from peer-template SPINE
  BGP version 4, remote router ID 172.16.1.2
  BGP state = Established, up for 03:16:51
  Using loopback0 as update source for this peer
  Peer is directly attached, interface Ethernet1/2
  Last read 00:00:02, hold time = 9, keepalive interval is 3 seconds
  Last written 0.970327, keepalive timer expiry due 00:00:02
  Received 3952 messages, 0 notifications, 0 bytes in queue
  Sent 3939 messages, 0 notifications, 0(0) bytes in queue
  Connections established 1, dropped 0
  Last reset by us never, due to No error
  Last reset by peer never, due to No error

  Neighbor capabilities:
  Dynamic capability: advertised (mp, refresh, gr) received (mp, refresh, gr)
  Dynamic capability (old): advertised received
  Route refresh capability (new): advertised received
  Route refresh capability (old): advertised received
  4-Byte AS capability: advertised received
  Address family IPv4 Unicast: advertised received
  Graceful Restart capability: advertised received

  Graceful Restart Parameters:
  Address families advertised to peer:
    IPv4 Unicast
  Address families received from peer:
    IPv4 Unicast
  Forwarding state preserved by peer for:
  Restart time advertised to peer: 120 seconds
  Stale time for routes advertised by peer: 300 seconds
  Restart time advertised by peer: 120 seconds
  Extended Next Hop Encoding Capability: advertised received
  Receive IPv6 next hop encoding Capability for AF:
    IPv4 Unicast

  Message statistics:
                              Sent               Rcvd
  Opens:                         1                  1
  Notifications:                 0                  0
  Updates:                       8                 16
  Keepalives:                 3931               3931
  Route Refresh:                 1                  2
  Capability:                    2                  2
  Total:                      3939               3952
  Total bytes:               75083              75570
  Bytes in queue:                0                  0

  For address family: IPv4 Unicast
  BGP table version 20, neighbor version 20
  3 accepted paths consume 396 bytes of memory
  1 sent paths
  Last End-of-RIB received 03:05:14 after session start
  Last End-of-RIB sent 03:05:19 after session start
  First convergence 00:00:01 after session start with 1 routes sent

  Local host: 10.2.1.2, Local port: 25118
  Foreign host: 10.2.1.1, Foreign port: 179
  fd = 67

# **Настроить eBGP для Underlay сети.**


## **Цель:**
1. Настроить eBGP в Underlay сети, для IP связанности между всеми сетевыми устройствами.
2. Зафиксировать план работы, адресное пространство, схему сети, конфигурацию устройств.
3. Убедится в наличии IP связанности между устройствами (loopback-ми) в BGP домене


### **План работ:**
1. Собираем схему, распредаеляем адресное пространство.
2. Включаем процесс bgp на всех устройств схемы. (spine1 и spine2 в AS:65000, leaf1 AS:65001, leaf2 AS:65002, leaf3:65003).
3. Диагностика соседства, таблица маршрутизации, доступность всех loopback-ов устройств схемы.
4. Фиксация результатов.

![Схема подключения следующая](/LAB4-bgp/design.jpg)

Таблица линковых адресов:

| Leaf1 eth1/1   | Leaf2 eth1/1 | Leaf3 eth1/1 | Leaf1 eth1/2 | Leaf2 eth1/2 | leaf3 eth1/2 |
|:--------------:|:------------:|:------------:|:------------:|:------------:|:------------:|
| 10.1.1.2/30    |   10.1.1.6/30 | 10.1.1.10/30  | 10.2.1.2/30  | 10.2.1.6/30 | 10.2.1.10/30 |
|   II           |     II        |     II         |    II       |   II        |  II           |
| **spine1 eth1/1**  | **spine1 eth1/2** | **spine1 eth1/3** | **spine2 eth1/1** | **spine2 eth1/2** | **spine3 eth1/3** |
| 10.1.1.1/30    |   10.1.1.5/30 | 10.1.1.9/30  | 10.2.1.1/30  | 10.2.1.5/30 | 10.2.1.9/30 |


Таблица loopback адресов (lo0):
| spine1           |       spine2  |      Leaf1   | Leaf2        |     leaf3    |
|:----------------:|:-------------:|:------------:|:------------:|:------------:|
| 172.16.1.1/32    | 172.16.1.2/32 | 172.16.2.1/32 | 172.16.2.2/32 | $172.16.2.3/32 |



*Конфигурация оборудования:*  
[Конфигурацию leaf1 можно увидеть здесь](../LAB3-isis/leaf1-isis-cfg.txt)  
[Конфигурацию leaf2 можно увидеть здесь](../LAB3-isis/leaf2-isis-cfg.txt)  
[Конфигурацию leaf3 можно увидеть здесь](../LAB3-isis/leaf3-isis-cfg.txt)  
[Конфигурацию spine1 можно увидеть здесь](../LAB3-isis/spine1-isis-cfg.txt)  
[Конфигурацию spine2 можно увидеть здесь](../LAB3-isis/spine2-isis-cfg.txt)  

*Диагностика соседства is-is, маршрутов is-is и доступности loopback-ов через is-is:*  
[spine1](../LAB3-isis/spine1-isis-diag.txt)  
[spine2](../LAB3-isis/spine2-isis-diag.txt)  
[leaf1](../LAB3-isis/leaf1-isis-diag.txt)  
[leaf2](../LAB3-isis/leaf2-isis-diag.txt)  
[leaf3](../LAB3-isis/leaf3-isis-diag.txt)

